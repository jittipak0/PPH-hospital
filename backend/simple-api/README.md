# Simple Express API

ระบบ backend แบบง่ายสำหรับโครงการ PPH Hospital ที่ออกแบบมาเพื่อให้เริ่มต้นได้รวดเร็ว ไม่ต้องเรียนรู้โครงสร้างขนาดใหญ่ของ Laravel หรือ Express เวอร์ชันเต็ม

## ฟีเจอร์ที่มีให้
- `GET /health` ตรวจสอบสถานะเซิร์ฟเวอร์
- `GET /api/news` คืนข่าวประชาสัมพันธ์ตัวอย่าง พร้อมจัดเรียงตามวันที่เผยแพร่
- `GET /api/security/csrf-token` แจกโทเค็นสำหรับป้องกัน CSRF (เก็บในคุกกี้ HttpOnly)
- `POST /api/forms/*` สำหรับส่งฟอร์มคำขอเวชระเบียน, บริจาค, ประเมินความพึงพอใจ (มีการตรวจสอบข้อมูล)
- `POST /api/programs/health-rider/apply` สมัครเข้าร่วมโปรแกรม Health Rider

ทุก endpoint ตอบกลับด้วย JSON และมีข้อความภาษาไทยชัดเจน เหมาะสำหรับนำไปต่อยอดหรือเปลี่ยนเป็นฐานข้อมูลจริงในภายหลัง

## การเริ่มต้นใช้งาน
```bash
cd backend/simple-api
npm install
npm run dev      # รันเซิร์ฟเวอร์แบบ auto-reload ที่ http://localhost:4000
```

หากต้องการรันใน production ให้ใช้คำสั่ง `npm start` และตั้งค่าตัวแปร `PORT` ตามสภาพแวดล้อมของคุณ

## การทดสอบเบื้องต้น
1. เปิดเบราว์เซอร์เรียก `http://localhost:4000/health` ควรเห็น `{ "status": "ok", ... }`
2. เรียก `GET /api/news` จะได้ข้อมูลข่าวในรูป `{ news: [...] }`
3. ก่อนส่งฟอร์ม ให้เรียก `GET /api/security/csrf-token` เพื่อรับคุกกี้และส่ง header `X-CSRF-Token`
4. ลองส่ง `POST /api/forms/donation` ด้วย payload ตัวอย่าง จะได้รหัสอ้างอิงกลับมา

## การต่อยอด
- นำ `newsItems` ไปเชื่อมต่อฐานข้อมูลจริง เช่น MySQL หรือ PostgreSQL
- เปลี่ยนระบบโทเค็น CSRF ให้บันทึกใน Redis สำหรับการใช้งานหลาย instance
- เพิ่มระบบล็อกอิน/สิทธิ์การเข้าถึง หากต้องการฟังก์ชัน intranet

> โค้ดถูกเขียนให้อ่านง่าย แยกเป็นโมดูลเล็ก ๆ (ข่าว, ฟอร์ม, โปรแกรม) และใช้ Zod สำหรับตรวจสอบข้อมูลเข้า
